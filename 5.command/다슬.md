# 커맨드 패턴

- 행위를 객체로 캡슐화하여 실행할 수 있도록 하는 패턴
- 요청을 객체의 형태로 매개변수화하여 서로 다른 요청을 매개변수화된 클라이언트 객체들이 서로 동일한 방식으로 처리할 수 있게 한다

## 구성 요소

1. Command (명령)

   - 실행할 명령에 대한 인터페이스를 정의
   - `execute()` 메서드를 통해 명령을 실행

2. ConcreteCommand (구체적인 명령)

   - `Command` 인터페이스를 구현한 구체적인 명령 클래스
   - 실제로 명령을 수행하는 객체를 포함하고 있음

3. Invoker (호출자)

   - 명령을 실행하는 역할을 한다.
   - 클라이언트가 명령을 요청하면 이를 수행할 적절한 `Command` 객체를 호출

4. Receiver (수신자)
   - 명령에 의해 실행되는 객체
   - 실제로 명령의 작업을 수행

## 예시

1. Command 인터페이스 정의

```ts
class Command {
  execute() {
    throw new Error("execute 메서드를 구현해주세요");
  }
}
```

2. ConcreteCommand 구현

```ts
class AddTodoCommand extends Command {
  constructor(todoList, newTodo) {
    super();
    this.todoList = todoList;
    this.newTodo = newTodo;
  }

  execute() {
    this.todoList.addTodo(this.newTodo);
  }
}

class DeleteTodoCommand extends Command {
  constructor(todoList, todoId) {
    super();
    this.todoList = todoList;
    this.todoId = todoId;
  }

  execute() {
    this.todoList.deleteTodo(this.todoId);
  }
}
```

3. Receiver 정의

```ts
class TodoListReceiver {
  constructor() {
    this.todos = [];
  }

  addTodo(todo) {
    this.todos.push(todo);
  }

  deleteTodo(todoId) {
    this.todos = this.todos.filter((todo) => todo.id !== todoId);
  }
}
```

4. Invoker (호출자) 정의

```ts
class TodoListManager {
  constructor() {
    this.commands = [];
    this.todoListReceiver = new TodoListReceiver();
  }

  executeCommand(command) {
    this.commands.push(command);
    command.execute();
  }

  undo() {
    const lastCommand = this.commands.pop();
    if (lastCommand) {
      lastCommand.undo();
    }
  }
}
```

5. 컴포넌트 코드

```tsx
const TodoApp = () => {
  const [newTodoText, setNewTodoText] = useState("");
  const [todoListManager] = useState(new TodoListManager());

  const handleAddTodo = () => {
    const newTodo = { id: Date.now(), text: newTodoText };
    const addTodoCommand = new AddTodoCommand(
      todoListManager.todoListReceiver,
      newTodo
    );
    todoListManager.executeCommand(addTodoCommand);
    setNewTodoText("");
  };

  const handleDeleteTodo = (todoId) => {
    const deleteTodoCommand = new DeleteTodoCommand(
      todoListManager.todoListReceiver,
      todoId
    );
    todoListManager.executeCommand(deleteTodoCommand);
  };

  const handleUndo = () => {
    todoListManager.undo();
  };
};
```
